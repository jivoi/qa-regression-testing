#include <stdio.h>
#include <string.h>

/* based on https://bugzilla.redhat.com/show_bug.cgi?id=826943 */

static char buf[32768];
static const char expected[] = "\
\n\
a\n\
abbcd55%%%%%%%%%%%%%%%%%%%%%%%%%%\n";

int main (void)
{
  snprintf (buf, sizeof (buf),
	    "\n%1$s\n" "%1$s" "%2$s" "%2$s" "%3$s" "%4$s" "%5$d" "%5$d"
	    "%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n",
	    "a", "b", "c", "d", 5);
  return strcmp (buf, expected) != 0;
}
